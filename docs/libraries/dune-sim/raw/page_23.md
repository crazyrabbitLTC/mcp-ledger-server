# Add Account Activity - Sim by Dune

Source: page_23

![ETH Logo](https://api.dune.com/api/echo/beta/token/logo/1)

ETH

**$667.27**

0.14 ETH


![WETH Logo](https://api.dune.com/api/echo/beta/token/logo/1/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2)

Wrapped Ether

**$33.50**

0.01 WETH


![ETH Logo](https://api.dune.com/api/echo/beta/token/logo/8453)

ETH

**$4.75**

0 ETH


![POL Logo](https://api.dune.com/api/echo/beta/token/logo/137)

POL

**$0.48**

1.93 POL


![WBTC Logo](https://api.dune.com/api/echo/beta/token/logo/1/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599)

Wrapped BTC

**$0.10**

0 WBTC


![XEN Logo](https://api.dune.com/api/echo/beta/token/logo/1/0x06450dee7fd2fb8e39061434babcfc05599a6fb8)

XEN Crypto

**$0.03**

1,000,000 XEN


![xDG Logo](https://api.dune.com/api/echo/beta/token/logo/1/0x4f81c790581b240a5c948afd173620ecc8c71c8d)

Decentral Games Governance

**$NaN**

0 xDG


worl

worldcoin.pm

**$NaN**

290 worldcoin.pm


Clai

$ cpusdc.com

**$NaN**

6,500,230 Claim USDC at https://cpusdc.co


hUSD

hUSDC.cc

**$NaN**

1,185 hUSDC


Clai

$ cusdcs.eth.li

**$NaN**

1,300 Claim USDC at https://cusdcs.et


Clai

$ cUSDC.cc

**$NaN**

1,000 Claim USDC at https://cUSDC.cc


xdai

xdai.usdc20.com

**$NaN**

620 xdai.usdc20.com


Clai

$ hUSDC.cc

**$NaN**

390 Claim USDC at https://hUSDC.cc


Bell

$ BellaFi.net

**$NaN**

5,000,000 BellaFi at https://bellafi.net


Pump

@CowPump

**$NaN**

21,000,000 Pump at https://t.me/cowpump


xdai

xdai.firstchef.net

**$NaN**

600,000,000 xdai.firstchef.net


Bala

Balancer

**$NaN**

750 BalancerV2.com


Clai

$ USDCpool.tech

**$NaN**

938 Claim USDC/WETH at https://USDC


http

~ KjUSD.tech

**$NaN**

227.3 https://KjUSD.tech to claim rew


Bala

Balancer

**$NaN**

392 BalancerV2.com


$

E T H - B O N U S ˳ N E T

**$NaN**

10,000 $


Clai

$ enstoken.io

**$NaN**

14,000 Claim $ENS rewards at https://e


Clai

$ wbtc.fi

**$NaN**

125 Claim $wBTC rewards at https://


hUSD

hUSDC.cc

**$NaN**

1,185 hUSDC


celo

celo.worldcoin.pm

**$NaN**

290 celo.worldcoin.pm



↓



Received Token




From

0xdcc1...a7c8


8/15/2025


+<0.0001


↓



Received Token




From

0xdcc1...a7c8


8/15/2025


+<0.0001


↓



Received Token




From

0xdcc1...a7c8


8/15/2025


+<0.0001


↓



Received Token




From

0xb4ed...5ae2


7/17/2025


+<0.0001


↓



Received Token




From

0x26dd...9544


6/13/2025


+<0.0001


↓



Received Token




From

0x26dd...9544


6/13/2025


+<0.0001


↓



Received Token




From

0x26dd...9544


6/13/2025


+<0.0001


✓

Mint




Interaction



4/20/2025


✓

Mint




Interaction



4/14/2025


↓



Received Token




From

0xd8d9...8604


3/29/2025


+<0.0001


↓



Received WETH \[ WWW.20ETH.EU \] Visit to




From

0x03b5...bccd


3/27/2025


+<0.0001 WETH


↓



Received ENT




From

0xd152...2150


2/20/2025


+123.0696525 ENT


↓



Received Token




From

0x6736...5cd6


2/19/2025


+12064 Tokens


↓



Received ETH




From

0x1288...5687


2/13/2025


+0.0001 ETH


↑



Sent ETH




To

0x1288...5687


2/13/2025


 -0.0001 ETH


↓



Received Token




From

0x239b...9fce


2/11/2025


↓



Received $weETH - Redeem: t.ly/weth




From

0x04c0...150a


2/11/2025


+<0.0001 weETH


↓



Received $TRUMP - Claim: t.ly/TRUMP - #1




From

0xc274...2ad4


2/11/2025


+<0.0001 TRUMP


↓



Received Token




From

0x38b1...4f6b


2/11/2025


+<0.0001


↑



Sent USDC




To

0x5c7b...35c5


2/11/2025


 -600 USDC


↓



Received Token




From

0x3ab3...f1de


2/11/2025


+<0.0001


✓

Approve




Interaction



2/11/2025


1.16e+71 USDC


↓



Received Token




From

0x7f62...9de2


2/5/2025


+<0.0001


✓

Mint




Interaction



1/6/2025


✓

Mint




Interaction



12/30/2024

[![addbox-232](https://i2.seadn.io/base/0xedda41277b2f6bdee5a739227730a678608041e5/4ac03b58f03bc15de29a29b49039de/bd4ac03b58f03bc15de29a29b49039de.png)\\
\\
addbox-232\\
\\
\\
#0](https://opensea.io/assets/base/0xce46e81b694561330e2b929c306668ab65f7edd8/0)

$706.13

0x48D004a6C175dB331E99BeAf64423b3098357Ae7

`getWalletActivity` `server.js` ``async function getWalletActivity(walletAddress, limit = 25) { // Default to fetching 25 activities
    if (!walletAddress) return [];
    // The Activity API is currently in beta.
    // We add a 'limit' query parameter to control how many activities are returned.
    const url = `https://api.sim.dune.com/v1/evm/activity/${walletAddress}?limit=${limit}`;
    try {
        const response = await fetch(url, {
            headers: {
                'X-Sim-Api-Key': SIM_API_KEY, // Your API key from .env
                'Content-Type': 'application/json'
            }
        });
        if (!response.ok) {
            const errorBody = await response.text();
            console.error(`Activity API request failed with status ${response.status}: ${response.statusText}`, errorBody);
            throw new Error(`Activity API request failed: ${response.statusText}`);
        }
        const data = await response.json();
        // The API returns activity items in the 'activity' key of the JSON response.
        return data.activity || [];
    } catch (error) {
        console.error("Error fetching wallet activity:", error.message);
        return []; // Return empty array on error
    }
}
`` `/v1/evm/activity/{address}` `limit` `activity` `block_time` `transaction_hash` `from` `to` `value` `value_usd` `offset` `limit` `app.get('/')` `getWalletActivity` `res.render` `app.get('/', async (req, res) => {
    const {
        walletAddress = '',
        tab = 'tokens'
    } = req.query;
    let tokens = [];
    let activities = [];
    let collectibles = [];
    let totalWalletUSDValue = 0;
    let errorMessage = null;
    if (walletAddress) {
        try {
            [tokens, activities] = await Promise.all([\
                getWalletBalances(walletAddress),\
                getWalletActivity(walletAddress, 25) // Fetching 25 recent activities\
            ]);
            // Calculate the total USD value from the fetched tokens
            if (tokens && tokens.length > 0) {
                tokens.forEach(token => {
                    let individualValue = parseFloat(token.value_usd);
                    if (!isNaN(individualValue)) {
                        totalWalletUSDValue += individualValue;
                    }
                });
            }

            totalWalletUSDValue = numbro(totalWalletUSDValue).format('$0,0.00');
        } catch (error) {
            console.error("Error in route handler:", error);
            errorMessage = "Failed to fetch wallet data. Please try again.";
            // tokens will remain empty, totalWalletUSDValue will be 0
        }
    }
    res.render('wallet', {
        walletAddress: walletAddress,
        currentTab: tab,
        totalWalletUSDValue: totalWalletUSDValue, // We'll calculate this in the next section
        tokens: tokens,
        activities: activities, // Placeholder for Guide 2
        collectibles: [], // Placeholder for Guide 3
        errorMessage: errorMessage
    });
});
` `app.get('/')` `tokens` `activities` `res.render` `wallet.ejs` `views/wallet.ejs` `id="activity"` `div` ``<!-- Activity Tab Pane (for Guide 2) -->
<div id="activity" class="tab-pane <%= currentTab === 'activity' ? 'active' : '' %>">
<% if (activities && activities.length > 0) { %>
    <% activities.forEach(activity => { %>
        <div class="list-item">
            <div class="item-icon-placeholder">
                <% if (activity.type === 'receive') { %>
                    ↓
                <% } else if (activity.type === 'send') { %>
                    ↑
                <% } else if (activity.type === 'call') { %>
                    ⇆ <!-- Icon for contract call -->
                <% } else { %>
                    ✓ <!-- Generic icon for other types -->
                <% } %>
            </div>
            <div class="item-info">
                <%
                    let activityTitle = activity.type.charAt(0).toUpperCase() + activity.type.slice(1);
                    let activityColorClass = activity.type; // Used for potential CSS styling
                    if (activity.type === 'call' && activity.function && activity.function.name) {
                        activityTitle = `Call: ${activity.function.name}`;
                        activityColorClass = 'call';
                    } else if (activity.type === 'receive' || activity.type === 'send') {
                        const tokenSymbol = activity.token_metadata?.symbol ||
                                            (activity.asset_type === 'native' ?
                                                (activity.chain_id === 1 || activity.chain_id === 8453 || activity.chain_id === 10 ? 'ETH' : 'Native') :
                                                'Token');
                        activityTitle = `${activity.type === 'receive' ? 'Received' : 'Sent'} ${tokenSymbol}`;
                    }
                %>
                <p class="item-name activity-direction <%= activityColorClass %>"><%= activityTitle %></p>

                <p class="activity-address">
                    <%
                        let partyLabel = '', partyAddress = '';
                        if (activity.type === 'receive') {
                            partyLabel = 'From';
                            partyAddress = activity.from;
                        } else if (activity.type === 'send') {
                            partyLabel = 'To';
                            partyAddress = activity.to;
                        } else if (activity.type === 'call') {
                            partyLabel = 'Contract';
                            partyAddress = activity.to;
                        } else {
                            partyLabel = 'With';
                            partyAddress = activity.to || activity.from || 'Unknown';
                        }
                    %>

                    <% if (partyAddress && partyAddress !== 'Unknown') { %>
                        <%= partyLabel %>
                        <span class="mono">
                            <%= partyAddress.substring(0, 6) %>...<%= partyAddress.substring(partyAddress.length - 4) %>
                        </span>
                    <% } else { %>
                        Interaction
                    <% } %>
                </p>

                <p class="activity-timestamp">
                    <span class="mono"><%= new Date(activity.block_time).toLocaleDateString(); %></span>
                </p>
            </div>
            <div class="item-value-right">
                <% if (activity.type === 'call') { %>
                    <p class="activity-amount-right <%= activityColorClass %>" style="font-family: var(--font-primary);">
                        Interaction
                    </p>
                <% } else if (activity.value) { %>
                    <p class="activity-amount-right <%= activityColorClass %>">
                        <%
                        let amountDisplay = '0';
                        const decimals = typeof activity.token_metadata?.decimals === 'number' ? activity.token_metadata.decimals : 18;
                        if (decimals !== null) {
                            const valueStr = activity.value.toString();
                            const padded = valueStr.padStart(decimals + 1, '0');
                            let intPart = padded.slice(0, -decimals);
                            let fracPart = padded.slice(-decimals).replace(/0+$/, '');
                            if (!intPart) intPart = '0';
                            if (fracPart) {
                                amountDisplay = `${intPart}.${fracPart}`;
                            } else {
                                amountDisplay = intPart;
                            }
                            const amountNum = parseFloat(amountDisplay);
                            if (amountNum > 0 && amountNum < 0.0001) {
                                amountDisplay = '<0.0001';
                            }
                            if (amountNum > 1e12 || amountDisplay.length > 12) {
                                amountDisplay = amountNum.toExponential(2);
                            }
                        } else {
                            amountDisplay = activity.id || String(activity.value);
                        }
                        // Clean up the symbol: remove $ and anything after space/dash/bracket, and limit length
                        let symbol = activity.token_metadata?.symbol || (activity.asset_type === 'native'
                            ? (activity.chain_id === 1 || activity.chain_id === 8453 || activity.chain_id === 10 ? 'ETH' : 'NTV')
                            : (activity.id ? '' : 'Tokens'));
                        if (symbol) {
                            symbol = symbol.replace('$', '').split(/[\s\-\[]/)[0].substring(0, 8);\
                        }\
                        %>\
                        <% if (activity.type === 'receive') { %>+<% } else if (activity.type === 'send') { %>-<% } %><%= amountDisplay %> <span class="mono"><%= symbol %></span>\
                    </p>\
                <% } %>\
            </div>\
        </div>\
    <% }); %>\
<% } else if (walletAddress) { %>\
    <p style="text-align: center; padding-top: 30px; color: var(--color-text-muted);">No activity found for this wallet.</p>\
<% } else { %>\
    <p style="text-align: center; padding-top: 30px; color: var(--color-text-muted);">Enter a wallet address to see activity.</p>\
<% } %>\
</div>\
`` `activity.type` `activity.function.name` `block_time` `chain_id` `value` `decimals` `token_metadata` `token_id` `value_usd` `node server.js`\
\
```\
\
```\
\
```\
\
```\
\
```\
\
```